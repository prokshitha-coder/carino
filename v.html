<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
    <title>cari√±o</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .page{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
                 position:relative;
}

/* modal */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:2000}
.overlay.show{display:flex}
.modal{background:#fff;padding:20px 22px;border-radius:12px;max-width:380px;text-align:center;transform:translateY(12px) scale(.98);opacity:0;transition:all 260ms ease}
.overlay.show .modal{transform:translateY(0) scale(1);opacity:1}
.modal h2{margin:0 0 8px;color:var(--accent)}

/* floating hearts */
.floating-hearts{position:absolute;inset:0;pointer-events:none;overflow:hidden}
    .start-hearts{position:absolute;inset:0;pointer-events:none;overflow:hidden;z-index:1}
    .card{position:relative;z-index:2}
    .start-hearts .heart{position:absolute;bottom:-6%;width:14px;height:14px;background:linear-gradient(45deg,#ff9ac4,#ff4fa3);transform:rotate(45deg);border-radius:3px;opacity:0.95;animation:floatUp 6s linear infinite}
    @keyframes floatUp{0%{transform:translateY(0) scale(.8);opacity:0}10%{opacity:1}100%{transform:translateY(-140vh) scale(1.1);opacity:0}}
.floating-hearts .heart{position:absolute;width:18px;height:18px;background:radial-gradient(circle at 30% 30%,#fff,#ff8db8);transform:rotate(45deg);opacity:0.9;border-radius:4px}
@keyframes rise{
    0%{transform:translateY(120vh) scale(0.6);opacity:0}
    30%{opacity:1}
    100%{transform:translateY(-20vh) scale(1);opacity:0}
}


                :root{--bg:#ffd6e8;--accent:#ff4fa3;--muted:#6b6b6b}
.page{min-height:100vh;display:flex;justify-content:center;align-items:center;text-align:center;padding:18px;box-sizing:border-box}
.final-card{background:white;padding:28px;border-radius:18px;animation:pop .5s ease;max-width:520px;width:100%;box-shadow:0 12px 40px rgba(0,0,0,0.08)}
.cute-images img{width:140px;margin:10px;border-radius:8px}
@keyframes pop{from{transform:scale(.92);opacity:0}to{transform:scale(1);opacity:1}}

/* responsive */
@media (max-width:520px){
    .final-card{padding:18px;border-radius:12px}
    .cute-images img{width:92px}
    .local-gif{max-width:220px}
    .question{font-size:1.15rem}
}

    .question-container {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }

    .local-gif {
      width: 100%;
      max-width: 300px;
      border-radius: 10px;
      display: block;
      margin: 0 auto 3rem auto;
      pointer-events: none;
    }

    .question {
      font-size: 1.6rem;
      color: #000000;
      margin-bottom: 1.2rem;
      text-align:center;
    }

    .button-container {
      position: relative;
      height: 80px;
    }
    .no {
        position:absolute;
    }

    .btn {
      border: none;
      border-radius: 50px;
      padding: 14px 24px;
      font-size: 18px;
      cursor: pointer;
      background-color: #ff54a4;
      color: white;
      transform: scale(1.05);
      box-shadow: 8px 4px 15px rgba(255, 107, 129, 0.5);
    }
        html, body{
            width: 100%;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }
        #page2{
            background: black;
            height: 100vh;
            width: 100%;
            display:none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            position: relative;
        }
        #confetti{
    position: fixed;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 999;
}

.confetti-piece{
    position: absolute;
    width: 10px;
    height: 18px;
    opacity: 0.9;
    animation: fall linear forwards;
}

@keyframes fall{
    from{
        transform: translateY(-50px) rotate(0deg);
    }
    to{
        transform: translateY(110vh) rotate(720deg);
    }
}
        .cake-area{
    position: relative;
    height: 420px;
    width: 300px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}
.next-btn {
    position: absolute;
    left:140%;
    top:55%;

    transform: translatey(-50%);

    padding: 14px 40px;
    font-size: 22px;
    font-weight:bold;

    background:#ff4fa3;
    color:white;

    border: 2px solid hotpink;
    border-radius: 40px;

    cursor: pointer;

    z-index: 2;   /* üëà BEHIND CAKE */

    opacity: 0.35;

    box-shadow:
        0 0 15px #ff4fa3,
        0 0 40px hotpink;

    animation: glow 2s infinite;
}
@keyframes glow {
    0% {
        opacity: 0.3;
        transform: translateX(-50%) scale(1);
    }
    50% {
        opacity: 0.8;
        transform: translateX(-50%) scale(1.1);
    }
    100% {
        opacity: 0.3;
        transform: translateX(-50%) scale(1);
    }
}
/* ---------- TOP TEXT ---------- */
.birthday-text{
    position: absolute;
    top: -150px;
    width: 100%;
    text-align: center;

    font-size: 54px;
    font-weight: 900;
    letter-spacing: 2px;

    color: #ffffff;

    text-shadow:
        0 0 10px #fff,
        0 0 20px #ff9de2,
        0 0 40px #ff4fd8,
        0 0 60px #ff1493;

    animation: glowFloat 3s ease-in-out infinite;
    z-index: 50;
}

/* ---------- 18th TEXT ---------- */
.age-text{
    position: absolute;
    bottom: -110px;
    width: 100%;
    text-align: center;

    font-size: 38px;
    font-weight: bold;
    color: gold;

    text-shadow:
        0 0 10px gold,
        0 0 25px orange,
        0 0 40px red;

    animation: popAge 2s ease-in-out infinite;
}

/* ---------- ANIMATIONS ---------- */
@keyframes glowFloat{
    0%{
        transform: translateY(0) scale(1);
    }
    50%{
        transform: translateY(-12px) scale(1.05);
    }
    100%{
        transform: translateY(0) scale(1);
    }
}

@keyframes popAge{
    0%{ transform: scale(1); }
    50%{ transform: scale(1.2); }
    100%{ transform: scale(1); }
}
/* cake layers */
.cake{
    box-shadow: 0 0 25px rgba(255,180,220,0.6);
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 30px;
    opacity: 0;
    z-index:20;
}

/* layers */
.base{
    width: 220px;
    height: 80px;
    bottom: 0;
    background: #ffb6c1;
    animation: drop 1s forwards;
}

.middle{
    width: 180px;
    height: 70px;
    bottom: 80px;
    background:#ffc0cb;
    animation: drop 1s forwards;
    animation-delay: 1s;
}

.top{
    width: 140px;
    height: 60px;
    bottom: 150px;
    background:#ffd1dc;
    animation: drop 2s forwards;
    animation-delay: 2s;
}
.candle{
    position: absolute;
    width: 16px;
    height: 55px;
    background: linear-gradient(#fff,#ffd700);
    left: 50%;
    bottom: 225px;
    transform: translateX(-50%);
    border-radius: 10px;
    opacity: 0;
    animation: fadeIn 1s forwards;
    animation-delay: 4s;
}

/* flame */
.flame{
    position: absolute;
    width: 16px;
    height: 22px;
    background:radial-gradient(circle,#fff,orange,red);
    border-radius: 50%;
    top: -25px;
    left: 50%;
    animation: flicker 2s infinite alternate;
    box-shadow: 0 0 20px gold;
    transform: translateX(-50%);
}

/* candle appear */
@keyframes fadeIn{
    to{ opacity: 1; }
}

/* flame animation */
@keyframes flicker{
    from{transform: translatex(-50%)}
    to{transform: translatex(-50%) scale(1.15);}
}
/* animations */
@keyframes drop{
    0%{
        transform: translatex(-50%)
         translatey(-200px);
        opacity: 0;
    }
    100%{
        transform: translatex(-50%)
         translatey(0);
        opacity: 1;
    }
}

@keyframes fadeIn{
    to{ opacity:1; }
}

@keyframes popText{
    0%{
        transform: scale(0.2);
        opacity: 0;
    }
    100%{
        transform: scale(1);
        opacity: 1;
    }
}
         body{
            margin: 0;
            height: 100vh;
            background:powderblue;
            display:flex;
            justify-content: center;
            align-items: center;
            font-family:'dancing script', cursive;
        }
        .card{
            background:
            linear-gradient(135deg,#f6d1f5,#f183d9);
            padding: 50px;
            width: 350px;
            border-radius: 30px;
            text-align: center;
            box-shadow: 0  20px rgba(249, 143, 215, 0.3); 
            animation:float 3s ease-in-out infinite;
        }
        @keyframes float{
            0%{
                transform: translateY(0px);
            }
            50%{
                transform: translateY(-20px);
            }
            100%{
                transform: translateY(0);
            }
        }
        .card h1{
            margin-bottom: 30px;
        }
        button{
            padding: 15px 40px;
            font-size: 22px;
            border-radius: 30px;
            border: 2px solid black;
            background-color: pink;
            color: rgb(21, 21, 21);
            cursor: pointer;
        }
        button:hover{
            background-color:deeppink;
        }
        .page{
            height: 100vh;
            width:100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction:column;
        }
        </style>
</head>
<body>
    <audio id="bgmusic" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>
    <button id="toggleMusicBtn" aria-pressed="false" aria-label="Play background music" style="position:fixed;right:12px;top:12px;padding:8px 12px;border-radius:8px;background:var(--accent);color:#fff;border:none;z-index:1500;cursor:pointer" onclick="toggleMusic()">Play music</button>
    <a href="index.html" style="position:fixed;left:12px;top:12px;color:#fff;background:rgba(0,0,0,0.12);padding:8px 10px;border-radius:8px;text-decoration:none;z-index:1500">Home</a>
    <div id="page1" class="page">
    <div class="start-hearts" aria-hidden="true"></div>
    <div class="card">
    <h1>A SURPRISE FOR YOUUUU</h1>
    <button onclick="gonext()">CLICK ME!</button>
    </div>
    </div>
<div id="page2" class="page" style="display:none;">
    <div id="confetti"></div>
    <div class="cake-area">
         <h1 class="birthday-text">
                HAPPY BIRTHDAY VINNU!
            </h1>
        <div class="cake base"></div>
        <div class="cake middle"></div>
        <div class="cake top"></div>
        <div class="candle">
            <div class="flame"></div>
            </div>
    <div class="age-text">
        18TH BIRTHDAY
    </div>
    <button class="next-btn" onclick="openpage3()">NEXT</button>
    </div>
</div>
<div id="page3" class="page" style="display:none;">
    <div class="question-container">
  <img src="teddy.gif" class="local-gif">

  <div class="question">
        WILL YOU BE MY VALENTINEEEE? üíñ
  </div>

  <div class="button-container">
    <button class="btn yes" onclick="openpage4()">YES</button>
    <button class="btn no">NO</button>
  </div>
  </div>
</div>

<div id="page4" class="page" style="display:none;position:relative;">
    <div class="floating-hearts" aria-hidden="true"></div>
    <div class="final-card" id="finalCard" role="region" aria-labelledby="finalTitle">
        <h1 id="finalTitle" class="reveal delay-1">I know the answer <span id="userNameSpan">‚ù§Ô∏è</span></h1>
        <p>
            Thank you for saying yes ‚Äî I was waiting for this.
        </p>

        <div class="cute-images reveal delay-2">
            <img src="hug1.gif" alt="hug">
            <img src="hug2.gif" alt="hug">
        </div>

        <h3 class="reveal delay-3">Now you're stuck with me forever ‚ôæÔ∏è</h3>

        <button id="absolutelyNoBtn" class="nope-btn reveal delay-3" onclick="absolutelyNo()">Absolutely No</button>
    </div>
</div>

<!-- modal overlay -->
<div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
        <h2 id="modalTitle">It's too late now.</h2>
        <p style="margin:8px 0 16px">You already said yes üòå</p>
        <div style="text-align:center">
            <button id="modalOk" onclick="closeModal()" style="padding:10px 16px;border-radius:8px;border:none;background:var(--accent);color:#fff;cursor:pointer">OK</button>
        </div>
    </div>
</div>
<script>
  const noBtn = document.querySelector(".no");

  noBtn.addEventListener("mouseenter", moveButton);
  noBtn.addEventListener("click", moveButton);

  function moveButton(){
    const container = document.querySelector(".button-container");

    const maxX = container.clientWidth - noBtn.offsetWidth;
    const maxY = container.clientHeight - noBtn.offsetHeight;

    const x = Math.random() * maxX;
    const y = Math.random() * maxY;

    noBtn.style.left = `${x}px`;
    noBtn.style.top = `${y}px`;
  }

function gonext(){
    document.getElementById("bgmusic").play();
    document.getElementById("page1").style.display="none";
    document.getElementById("page2").style.display="flex";
    createConfetti();
}
    function openpage3() {
        document.getElementById("page2").style.display="none";
        document.getElementById("page3").style.display="flex";
    }
function openpage4() {
        document.getElementById("page3").style.display="none";
        document.getElementById("page4").style.display="flex";
    // show personalized greeting and floating hearts
    showGreeting();
    createHearts();
}


function createConfetti() {
    const confettiContainer = document.getElementById("confetti");
    const colors = ["#ff0000", "#00ff00", "#0000ff", "#ffff00", "#ff00ff", "#00ffff"];
    for (let i = 0; i < 150; i++) {
        const confetti = document.createElement("div");
        confetti.className = "confetti-piece";
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDuration = (Math.random() * 3 + 2) + "s";
        confettiContainer.appendChild(confetti);
    }
}

function absolutelyNo(){
    const card = document.getElementById('finalCard');
    if(!card) return;
    // show modal instead of replacing content
    const overlay = document.getElementById('overlay');
    if(!overlay) return;
    // play small sfx, then show modal
    playSfx();
    overlay.classList.add('show');
    overlay.setAttribute('aria-hidden','false');
    // focus management
    window._prevFocus = document.activeElement;
    const ok = document.getElementById('modalOk');
    if(ok) ok.focus();
}

function closeModal(){
    const overlay = document.getElementById('overlay');
    if(!overlay) return;
    overlay.classList.remove('show');
    overlay.setAttribute('aria-hidden','true');
    if(window._prevFocus && typeof window._prevFocus.focus === 'function'){
        try{ window._prevFocus.focus(); }catch(e){}
    }
}

function toggleMusic(){
    const a = document.getElementById('bgmusic');
    const btn = document.getElementById('toggleMusicBtn');
    if(!a) return;
    if(a.paused){ a.play(); btn.textContent = 'Pause music'; }
    else{ a.pause(); btn.textContent = 'Play music'; }
}

// update aria-pressed state when music toggles
document.getElementById('bgmusic').addEventListener('play', ()=>{
    const b = document.getElementById('toggleMusicBtn'); if(b) b.setAttribute('aria-pressed','true');
});
document.getElementById('bgmusic').addEventListener('pause', ()=>{
    const b = document.getElementById('toggleMusicBtn'); if(b) b.setAttribute('aria-pressed','false');
});

// play a short beep using Web Audio
function playSfx(){
    try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'sine'; o.frequency.value = 880;
        g.gain.value = 0.0001;
        o.connect(g); g.connect(ctx.destination);
        o.start();
        // fade in quickly then out
        g.gain.exponentialRampToValueAtTime(0.08, ctx.currentTime + 0.02);
        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.35);
        setTimeout(()=>{ try{o.stop(); ctx.close();}catch(e){} }, 420);
    }catch(e){ /* WebAudio not available */ }
}

// close modal with Escape and trap focus
document.addEventListener('keydown', (e)=>{
    const overlay = document.getElementById('overlay');
    if(!overlay) return;
    if(overlay.classList.contains('show')){
        if(e.key === 'Escape') closeModal();
        // simple focus trap: keep focus inside modal
        const focusable = overlay.querySelectorAll('button, [href], input, select, textarea');
        if(focusable.length){
            const first = focusable[0]; const last = focusable[focusable.length-1];
            if(e.key === 'Tab'){
                if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
                else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
            }
        }
    }
});

function showGreeting(){
    const name = (localStorage && localStorage.getItem('userName')) || '';
    const el = document.getElementById('userNameSpan');
    if(el){ el.textContent = name ? (name + ' ‚ù§Ô∏è') : '‚ù§Ô∏è'; }
}

function createHearts(){
    const container = document.querySelector('.floating-hearts');
    if(!container) return;
    container.innerHTML = '';
    for(let i=0;i<18;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        const left = Math.random()*100;
        const size = 10 + Math.random()*22;
        h.style.width = size+'px'; h.style.height = size+'px';
        h.style.left = left+'%';
        h.style.background = `linear-gradient(45deg,#ff8db8,#ff4fa3)`;
        h.style.animation = `rise ${6+Math.random()*4}s linear forwards`;
        h.style.animationDelay = (Math.random()*1)+'s';
        container.appendChild(h);
    }
}

function createStartHearts(){
    const container = document.querySelector('.start-hearts');
    if(!container) return;
    container.innerHTML = '';
    const count = 12;
    for(let i=0;i<count;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        const left = Math.random()*100;
        const size = 8 + Math.random()*20;
        h.style.width = size+'px'; h.style.height = size+'px';
        h.style.left = left+'%';
        h.style.bottom = (-10 - Math.random()*8) + '%';
        h.style.background = `linear-gradient(45deg, #ffd1e6, #ff6aa8)`;
        h.style.animationDuration = (5 + Math.random()*6) + 's';
        h.style.animationDelay = (Math.random()*3)+'s';
        h.style.opacity = 0;
        h.style.borderRadius = '3px';
        h.style.transform = 'rotate(45deg)';
        container.appendChild(h);
    }
}

// create start hearts on load
document.addEventListener('DOMContentLoaded', ()=>{ createStartHearts(); });
</script>
</body>
</html>